{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "github>microsoft/m365-renovate-config",
    "github>microsoft/m365-renovate-config:beachball",
    "github>microsoft/m365-renovate-config:disableEsmVersions",
    "github>microsoft/m365-renovate-config:groupMore",
    "github>microsoft/m365-renovate-config:groupTypes",
    "github>microsoft/m365-renovate-config:keepFresh",
    "github>microsoft/m365-renovate-config:restrictNode(14)"
  ],
  "labels": ["renovate"],
  "prHourlyLimit": 5,
  "semanticCommits": "disabled",
  "ignorePaths": [
    "**/node_modules/**",
    // incorrect manager is being used for fixtures, and most of them don't have real deps anyway
    "**/__fixtures__/**"
  ],
  "packageRules": [
    {
      "groupName": "Docusaurus packages",
      "matchPackageNames": ["docusaurus*", "@docusaurus/*"],
      // Disable updates until lage updates from Node 18 to a newer version
      // (newer than the specified docusaurus requires Node 20 without proper "engines" field)
      "enabled": false
    },
    {
      "groupName": "connectrpc packages",
      "matchPackageNames": ["@connectrpc/*"]
    },
    {
      "groupName": "bufbuild packages",
      "matchPackageNames": ["@bufbuild/*"]
    },
    {
      // Automatically pick up backfill and workspace-tools updates
      "matchPackageNames": ["backfill", "workspace-tools", "backfill-*"],
      "matchUpdateTypes": ["major", "minor", "patch", "bump"],
      "dependencyDashboardApproval": false
    },
    {
      // There's a dev dep "lage-npm": "npm:lage@<..." intended to pull in a slightly older
      // pre-built lage version for repo build orchestration (since local lage isn't built yet).
      // Disable updating this with Renovate because it will choose a range that includes the
      // latest version, which yarn will dedupe to the in-repo version.
      "matchPackageNames": ["lage", "lage-npm"],
      "enabled": false
    }
  ]
}
